<Window x:Class="AspNetMembershipManager.User.CreateUserWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		FocusManager.FocusedElement="{Binding ElementName=txtUserName}"
        Title="Create user" Height="282" Width="451" WindowStartupLocation="CenterOwner" ResizeMode="NoResize">
	<Window.Resources>
		<Style TargetType="{x:Type Label}">
			<Setter Property="Margin" Value="5,0,5,0" />
			<Setter Property="HorizontalAlignment" Value="Left" />
		</Style>
		<Style TargetType="{x:Type TextBox}">
			<Setter Property="VerticalAlignment" Value="Center" />
			<Setter Property="Margin" Value="0,2,40,2" />
			<Setter Property="Validation.ErrorTemplate">
				<Setter.Value>
					<ControlTemplate>
						<DockPanel LastChildFill="true">
							<Border Background="OrangeRed" DockPanel.Dock="right" Margin="5,0,0,0" 
                                Width="20" Height="20" CornerRadius="5"
                                ToolTip="{Binding ElementName=customAdorner, 
                                          Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
								<TextBlock Text="!" VerticalAlignment="center" HorizontalAlignment="center" 
                                   FontWeight="Bold" Foreground="white" />
							</Border>
							<AdornedElementPlaceholder Name="customAdorner" VerticalAlignment="Center" >
								<Border BorderBrush="red" BorderThickness="1" />
							</AdornedElementPlaceholder>
						</DockPanel>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
		<Style TargetType="{x:Type PasswordBox}">
			<Setter Property="VerticalAlignment" Value="Center" />
			<Setter Property="Margin" Value="0,2,40,2" />
			<Setter Property="Validation.ErrorTemplate">
				<Setter.Value>
					<ControlTemplate>
						<DockPanel LastChildFill="true">
							<Border Background="OrangeRed" DockPanel.Dock="right" Margin="5,0,0,0" 
                                Width="20" Height="20" CornerRadius="5"
                                ToolTip="{Binding ElementName=customAdorner, 
                                          Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
								<TextBlock Text="!" VerticalAlignment="center" HorizontalAlignment="center" 
                                   FontWeight="Bold" Foreground="white" />
							</Border>
							<AdornedElementPlaceholder Name="customAdorner" VerticalAlignment="Center" >
								<Border BorderBrush="red" BorderThickness="1" />
							</AdornedElementPlaceholder>
						</DockPanel>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>
    <Window.CommandBindings>
        <CommandBinding Command="Save" CanExecute="CreateUser_CanExecute" Executed="CreateUser_Executed" />
    </Window.CommandBindings>
    <Grid>
        <GroupBox Header="User details" Height="110" HorizontalAlignment="Left" Margin="12,12,0,0" VerticalAlignment="Top" Width="413">
            <Grid>
               
                <Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="*" />
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="auto" />
					<RowDefinition Height="auto" />
					<RowDefinition Height="auto" />
					<RowDefinition Height="auto" />
				</Grid.RowDefinitions>
				<Label Content="Username:" Grid.Column="0" Grid.Row="0" />
				<Label Content="Password:" Grid.Column="0" Grid.Row="1" />
				<Label Content="Email address:" Grid.Column="0" Grid.Row="2" />
				<TextBox Name="txtUserName" Grid.Column="1" Grid.Row="0"
                         Validation.Error="Validation_Error"
                         Text="{Binding Path=Username, ValidatesOnDataErrors=true, NotifyOnValidationError=true}" />
				<PasswordBox Name="txtPassword" Grid.Column="1" Grid.Row="1" />
				<TextBox Name="txtEmailAddress" Grid.Column="1" Grid.Row="2"
                         Validation.Error="Validation_Error"
						 Text="{Binding UpdateSourceTrigger=PropertyChanged, Path=EmailAddress, ValidatesOnDataErrors=true, NotifyOnValidationError=true}" />
            </Grid>
        </GroupBox>
        <Button Content="Ok" IsDefault="True" HorizontalAlignment="Right" Margin="0,0,12,12" Name="btnOk" VerticalAlignment="Bottom" Width="75" Command="Save">
        </Button>
        <Button Content="Cancel" IsCancel="True" HorizontalAlignment="Right" Margin="0,0,93,12" Name="btnCancel" VerticalAlignment="Bottom" Width="75" />
        <Label Content="{Binding Error}" HorizontalAlignment="Left" Margin="12,128,0,0" VerticalAlignment="Top" Foreground="Red" />
    </Grid>
</Window>
